### 1절. 결측치 인식

#### 1. is.na(x)

: 결측치일 경우, TRUE

``` r
data("airquality")

is.na(airquality$Ozone)
```

    ##   [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
    ##  [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
    ##  [25]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
    ##  [37]  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE
    ##  [49] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
    ##  [61]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
    ##  [73] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
    ##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
    ##  [97] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE
    ## [109] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE
    ## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
    ## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
    ## [145] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE

``` r
sum(is.na(airquality$Ozone))
```

    ## [1] 37

``` r
table(sum(is.na(airquality$Ozone)))
```

    ## 
    ## 37 
    ##  1

``` r
apply(airquality, 2, function(x) sum(is.na(x)))
```

    ##   Ozone Solar.R    Wind    Temp   Month     Day 
    ##      37       7       0       0       0       0

#### 2. complete.cases(x)

: 결측치가 없을 경우, TRUE

``` r
air_na <- airquality[!complete.cases(airquality),]
head(air_na)
```

    ##    Ozone Solar.R Wind Temp Month Day
    ## 5     NA      NA 14.3   56     5   5
    ## 6     28      NA 14.9   66     5   6
    ## 10    NA     194  8.6   69     5  10
    ## 11     7      NA  6.9   74     5  11
    ## 25    NA      66 16.6   57     5  25
    ## 26    NA     266 14.9   58     5  26

``` r
dim(airquality)
```

    ## [1] 153   6

``` r
dim(air_na)
```

    ## [1] 42  6

### 2절. 결측치 처리

#### 1. 결측치 대처법

-   단순 대치법 - completes analysis, 평균 대치법, 단순확률 대치법

-   다중 대치법 - 대치-\>분석-\>결합

#### 2. 결측치 제거

-   데이터명\[!is.na(데이터명),\]

-   데이터명\[completes.cases(데이터명),\]

-   데이터명 %\>% filter(!is.na(데이터명))

-   na.omit(데이터명)

#### 3. 평균 대치법

``` r
# i.
airquality$Ozone <- ifelse(is.na(airquality$Ozone),mean(airquality$Ozone, na.rm = T),airquality$Ozone)

head(airquality)
```

    ##      Ozone Solar.R Wind Temp Month Day
    ## 1 41.00000     190  7.4   67     5   1
    ## 2 36.00000     118  8.0   72     5   2
    ## 3 12.00000     149 12.6   74     5   3
    ## 4 18.00000     313 11.5   62     5   4
    ## 5 42.12931      NA 14.3   56     5   5
    ## 6 28.00000      NA 14.9   66     5   6

``` r
sum(is.na(airquality$Ozone))
```

    ## [1] 0

``` r
# ii.
data("airquality")
airquality[is.na(airquality$Ozone),'Ozone'] <- mean(airquality$Ozone, na.rm = T)
sum(is.na(airquality$Ozone))
```

    ## [1] 0

#### 4. 패키지 활용

-   DMwR 패키지

1.  centralImputation(data) : na를 중앙값으로 대치

2.  centralValue(data) : 숫자데이터 -\> na = 중앙값 / 팩터 데이터 -\> na
    = 최빈값

3.  knnImputation(data,k) - knn알고리즘 이용하여 na 대치

~~=\> DMwR 패키지 다운 불가~~

``` r
remotes::install_github("cran/DMwR")
```

    ## Using GitHub PAT from the git credential store.

    ## Skipping install of 'DMwR' from a github remote, the SHA1 (6fd4f0cd) has not changed since last install.
    ##   Use `force = TRUE` to force installation

``` r
library(DMwR)
```

    ## Loading required package: lattice

    ## Loading required package: grid

    ## Registered S3 method overwritten by 'quantmod':
    ##   method            from
    ##   as.zoo.data.frame zoo

``` r
data("airquality")
air_before <- airquality
na_idx <- which(is.na(airquality))
head(air_before[na_idx,])
```

    ##    Ozone Solar.R Wind Temp Month Day
    ## 5     NA      NA 14.3   56     5   5
    ## 10    NA     194  8.6   69     5  10
    ## 25    NA      66 16.6   57     5  25
    ## 26    NA     266 14.9   58     5  26
    ## 27    NA      NA  8.0   57     5  27
    ## 32    NA     286  8.6   78     6   1

``` r
# i. centralImputation
air_after <- centralImputation(airquality)
head(air_after[na_idx,])
```

    ##    Ozone Solar.R Wind Temp Month Day
    ## 5   31.5     205 14.3   56     5   5
    ## 10  31.5     194  8.6   69     5  10
    ## 25  31.5      66 16.6   57     5  25
    ## 26  31.5     266 14.9   58     5  26
    ## 27  31.5     205  8.0   57     5  27
    ## 32  31.5     286  8.6   78     6   1

### 3절. 이상치 인식

#### 1. 이상치란?

: 정상 범위 밖에 있는 값

#### 2. 사분위수

1.  quantile
2.  fivenum()
3.  summary

#### 3. boxplot을 활용한 이상치 판별

``` r
data("airquality")
OzoneBP <- boxplot(airquality$Ozone)
```

![](5장.-결측치_files/figure-markdown_github/unnamed-chunk-5-1.png)

``` r
OzoneBP
```

    ## $stats
    ##       [,1]
    ## [1,]   1.0
    ## [2,]  18.0
    ## [3,]  31.5
    ## [4,]  63.5
    ## [5,] 122.0
    ## 
    ## $n
    ## [1] 116
    ## 
    ## $conf
    ##          [,1]
    ## [1,] 24.82518
    ## [2,] 38.17482
    ## 
    ## $out
    ## [1] 135 168
    ## 
    ## $group
    ## [1] 1 1
    ## 
    ## $names
    ## [1] "1"
